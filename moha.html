<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>اختبار منصة البرامج التخصصية - إدارة محمد طه</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --error: #e74c3c;
            --bg: #f4f7f6;
        }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); display: flex; justify-content: center; padding: 20px; }
        .quiz-container { background: white; width: 100%; max-width: 600px; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-top: 10px solid var(--secondary); }
        header { text-align: center; margin-bottom: 30px; }
        h1 { color: var(--primary); font-size: 24px; margin-bottom: 5px; }
        .admin-name { color: var(--secondary); font-weight: bold; }
        .question { display: none; margin-bottom: 20px; }
        .question.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .options { list-style: none; padding: 0; }
        .options li { background: #eee; margin: 10px 0; padding: 15px; border-radius: 8px; cursor: pointer; transition: 0.3s; font-weight: 500; }
        .options li:hover { background: #ddd; }
        .options li.correct { background: var(--success) !important; color: white; }
        .options li.wrong { background: var(--error) !important; color: white; }
        .footer { margin-top: 20px; display: flex; justify-content: space-between; align-items: center; }
        #result-area { text-align: center; display: none; }
        .btn-whatsapp { background: #25D366; color: white; padding: 15px 25px; border: none; border-radius: 50px; cursor: pointer; font-size: 18px; font-weight: bold; text-decoration: none; display: inline-block; margin-top: 20px; }
        input[type="text"] { width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 5px; }
    </style>
</head>
<body>

<div class="quiz-container">
    <header>
        <h1>منصة البرامج التخصصية</h1>
        <div class="admin-name">إدارة: محمد طه عطا المنان</div>
        <hr>
    </header>

    <div id="setup-area">
        <p>الرجاء إدخال اسمك للبدء:</p>
        <input type="text" id="user-name" placeholder="اكتب اسمك هنا...">
        <button class="btn-whatsapp" style="width:100%" onclick="startQuiz()">ابدأ الاختبار</button>
    </div>

    <div id="quiz-area" style="display:none;">
        <div id="questions-container"></div>
        <div class="footer">
            <span id="score-tracker">النقاط: 0</span>
            <span id="question-number">السؤال 1 من 10</span>
        </div>
    </div>

    <div id="result-area">
        <h2>اكتمل الاختبار!</h2>
        <p id="final-score" style="font-size: 24px; font-weight: bold;"></p>
        <p>اضغط أدناه لإرسال نتيجتك للإدارة</p>
        <a id="whatsapp-link" href="#" class="btn-whatsapp">إرسال النتيجة عبر واتساب ✅</a>
    </div>
</div>

<audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<script>
    const questions = [
        { q: "The manager gave a __________ presentation.", options: ["Good", "Compelling", "Well"], correct: 1 },
        { q: "We need a __________ analysis.", options: ["Comprehensive", "Comprehensively", "Quickly"], correct: 0 },
        { q: "The developer is very __________.", options: ["Slow", "Diligent", "Diligently"], correct: 1 },
        { q: "This is a __________ solution.", options: ["Reliable", "Reliably", "Fastly"], correct: 0 },
        { q: "The system became more __________.", options: ["Stable", "Stably", "Stability"], correct: 0 },
        { q: "The team achieved __________ results.", options: ["Exceptional", "Exceptionally", "Bad"], correct: 0 },
        { q: "It is __________ to maintain a backup.", options: ["Crucially", "Crucial", "Importance"], correct: 1 },
        { q: "She is a __________ leader.", options: ["Vision", "Visionary", "Visionarily"], correct: 1 },
        { q: "The support team was very __________.", options: ["Helpfully", "Helpful", "Help"], correct: 1 },
        { q: "We need a __________ person.", options: ["Competent", "Competently", "Competence"], correct: 0 }
    ];

    let currentQ = 0;
    let score = 0;
    let userName = "";

    function startQuiz() {
        userName = document.getElementById('user-name').value;
        if (!userName) { alert("من فضلك أدخل اسمك"); return; }
        document.getElementById('setup-area').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        showQuestion();
    }

    function showQuestion() {
        const container = document.getElementById('questions-container');
        const q = questions[currentQ];
        container.innerHTML = `
            <div class="question active">
                <h3>${currentQ + 1}. ${q.q}</h3>
                <ul class="options">
                    ${q.options.map((opt, i) => `<li onclick="checkAnswer(${i}, this)">${opt}</li>`).join('')}
                </ul>
            </div>
        `;
        document.getElementById('question-number').innerText = `السؤال ${currentQ + 1} من ${questions.length}`;
    }

    function checkAnswer(idx, element) {
        const correctIdx = questions[currentQ].correct;
        const options = document.querySelectorAll('.options li');
        
        // منع الضغط المتعدد
        options.forEach(li => li.style.pointerEvents = 'none');

        if (idx === correctIdx) {
            element.classList.add('correct');
            score++;
            document.getElementById('sound-correct').play();
        } else {
            element.classList.add('wrong');
            options[correctIdx].classList.add('correct');
            document.getElementById('sound-wrong').play();
        }

        document.getElementById('score-tracker').innerText = `النقاط: ${score}`;

        setTimeout(() => {
            currentQ++;
            if (currentQ < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }, 1500);
    }

    function showResult() {
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('result-area').style.display = 'block';
        document.getElementById('final-score').innerText = `درجتك هي: ${score} من ${questions.length}`;
        
        const message = `مرحباً أستاذ محمد طه، أنا الطالب: ${userName}. لقد أكملت اختبار الصفات في منصة البرامج التخصصية وحصلت على نتيجة: (${score} من 10).`;
        const whatsappUrl = `https://wa.me/249901946410?text=${encodeURIComponent(message)}`;
        document.getElementById('whatsapp-link').href = whatsappUrl;
    }
</script>

</body>
</html>
