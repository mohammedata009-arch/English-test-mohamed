<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Moha Specialized Platform</title>
    <style>
        :root { --primary: #6c5ce7; --secondary: #a29bfe; --success: #00b894; --error: #ff7675; --dark: #2d3436; --gold: #f1c40f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
        #welcome-overlay { 
            position: fixed; top:0; left:0; width:100%; height:100%; background: var(--dark); 
            z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center;
        }

        .header { width: 100%; max-width: 500px; background: var(--dark); color: white; padding: 20px 15px; border-radius: 15px 15px 0 0; text-align: center; border-bottom: 4px solid var(--gold); }
        .container { width: 100%; max-width: 500px; background: white; border-radius: 0 0 15px 15px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

        .guest-book { background: #fff9e6; padding: 10px; border-bottom: 2px solid var(--gold); font-size: 13px; width: 100%; max-width: 500px; box-sizing: border-box; }
        .name-tag { display: inline-block; background: var(--secondary); color: white; padding: 2px 8px; border-radius: 10px; margin: 2px; }

        .content-area { padding: 30px 15px; text-align: center; min-height: 350px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .word-title { font-size: 38px; color: var(--primary); font-weight: 800; margin: 10px 0; }
        .word-def { font-size: 1.1em; color: #444; background: #f8f9fa; padding: 15px; border-radius: 12px; border-left: 6px solid var(--primary); width: 90%; }
        
        .quiz-option { display: block; width: 95%; margin: 12px auto; padding: 18px; background: var(--secondary); color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; }
        .controls { background: #f1f3f5; padding: 15px; display: flex; justify-content: space-between; align-items: center; width: 100%; box-sizing: border-box; }
        .btn { padding: 12px 25px; border: none; border-radius: 30px; font-weight: bold; cursor: pointer; }
        .btn-main { background: var(--primary); color: white; }
        
        #video-section { display: none; width: 100%; background: #000; }
    </style>
</head>
<body>

<div id="welcome-overlay">
    <h1 style="color: var(--gold); padding: 0 20px;">Specialized English Platform</h1>
    <p>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§ Ø§Ù„Ù…Ù†Ø§Ù†</p>
    <input type="text" id="userName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§ Ù„Ù„Ø¨Ø¯Ø¡..." style="padding: 15px; border-radius: 10px; border: none; width: 80%; margin-bottom: 20px; font-size: 18px; text-align: center;">
    <button onclick="startApp()" style="padding: 18px 50px; background: var(--success); color: white; border: none; border-radius: 50px; font-weight: bold; font-size: 20px; cursor: pointer;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© ğŸš€</button>
</div>

<div class="header">
    <h1>ğŸ›ï¸ Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ©</h1>
    <p id="personal-welcome">Welcome!</p>
</div>

<div class="guest-book">
    <strong>Ø§Ù„Ø­Ø¶ÙˆØ±:</strong> <span id="namesList"></span>
</div>

<div class="container">
    <div class="content-area" id="main-board">
        <div id="word-display"></div>
        <button onclick="speakCurrent()" style="margin-top:20px; background: var(--gold); border:none; padding:10px 20px; border-radius:8px; font-weight:bold; cursor:pointer;">ğŸ”Š Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù†Ø·Ù‚</button>
    </div>

    <div class="content-area" id="quiz-container" style="display:none;">
        <h2 id="quiz-question" style="color: var(--primary); font-size: 22px;"></h2>
        <div id="quiz-options" style="width: 100%;"></div>
    </div>

    <div id="video-section">
        <div id="player"></div>
    </div>

    <div class="controls" id="footer-controls">
        <button id="prevBtn" class="btn btn-main" onclick="prev()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <div id="counter" style="font-weight: bold; color: var(--primary);">1 / 20</div>
        <button id="nextBtn" class="btn btn-main" onclick="next()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    // Ø±ÙˆØ§Ø¨Ø· Ø£ØµÙˆØ§Øª Ø¨Ø¯ÙŠÙ„Ø© Ø£ÙƒØ«Ø± Ø§Ø³ØªÙ‚Ø±Ø§Ø±Ø§Ù‹
    const bellSound = new Audio('https://actions.google.com/sounds/v1/cartoon/clown_horn_short.ogg'); 
    const clapSound = new Audio('https://actions.google.com/sounds/v1/human/applause_clapping_cheer.ogg');

    let current = 0;
    let quizCount = 0;
    let player;

    const terms = [
        { w: "Democracy", i: "ğŸ—³ï¸", m: "A system where citizens choose leaders by voting." },
        { w: "Election", i: "ğŸ«", m: "The formal process of selecting a person for office." },
        { w: "Diplomacy", i: "ğŸ¤", m: "Managing relations between nations peacefully." },
        { w: "Law", i: "âš–ï¸", m: "A set of rules created by the government." },
        { w: "Justice", i: "ğŸ›ï¸", m: "Fair and legal treatment for everyone." },
        { w: "Citizen", i: "ğŸ†”", m: "A legal member of a country with rights." },
        { w: "Reform", i: "ğŸ› ï¸", m: "To improve a system by making changes." },
        { w: "Debate", i: "ğŸ—£ï¸", m: "A formal discussion on a public topic." },
        { w: "Rights", i: "ğŸ“œ", m: "Legal freedoms guaranteed to people." },
        { w: "Peace", i: "ğŸ•Šï¸", m: "The absence of war and violence." },
        { w: "Vote", i: "ğŸ–‹ï¸", m: "An official choice made by a person." },
        { w: "Taxes", i: "ğŸ’°", m: "Money paid to the government for services." },
        { w: "Leader", i: "ğŸ‘‘", m: "A person who guides or commands." },
        { w: "Policy", i: "ğŸ“‹", m: "A plan or course of action by government." },
        { w: "Party", i: "ğŸš©", m: "A political group with common goals." },
        { w: "Freedom", i: "ğŸ—½", m: "The power to act, speak, or think freely." },
        { w: "Constitution", i: "ğŸ“–", m: "The fundamental laws of a nation." },
        { w: "State", i: "ğŸ—ºï¸", m: "A nation or territory under one government." },
        { w: "Negotiation", i: "ğŸ’¬", m: "Talks to reach a formal agreement." },
        { w: "Nation", i: "ğŸŒ", m: "A large group of people united by culture." }
    ];

    function startApp() {
        const nameInput = document.getElementById('userName').value.trim();
        const name = nameInput || "Ø²Ø§Ø¦Ø± Ø§Ù„Ù…Ù†Ù‡Ø¬";
        
        document.getElementById('welcome-overlay').style.display = 'none';
        document.getElementById('personal-welcome').innerText = "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ: " + name;

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª
        clapSound.play().catch(e => console.log("Audio play error"));
        
        const welcomeMsg = new SpeechSynthesisUtterance("Welcome " + name + ". Let's start the lesson.");
        window.speechSynthesis.speak(welcomeMsg);

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ (Ù…Ø­Ø§ÙƒØ§Ø©)
        let names = JSON.parse(localStorage.getItem('vNames')) || ["Ù…Ø­Ù…Ø¯ Ø·Ù‡", "Ø£Ø­Ù…Ø¯", "Ø¹Ù…Ø±"];
        if(nameInput) names.push(nameInput);
        if(names.length > 8) names.shift();
        localStorage.setItem('vNames', JSON.stringify(names));
        document.getElementById('namesList').innerHTML = names.map(n => `<span class="name-tag">${n}</span>`).join('');

        updateCard();
    }

    function updateCard() {
        const item = terms[current];
        document.getElementById('word-display').innerHTML = `
            <div style="font-size:70px">${item.i}</div>
            <div class="word-title">${item.w}</div>
            <div class="word-def">${item.m}</div>
        `;
        document.getElementById('counter').innerText = `${current + 1} / 20`;
        document.getElementById('prevBtn').style.visibility = current === 0 ? 'hidden' : 'visible';
    }

    function speakCurrent() {
        const msg = new SpeechSynthesisUtterance(terms[current].w + ". " + terms[current].m);
        msg.lang = 'en-US';
        window.speechSynthesis.speak(msg);
    }

    function next() { if (current < terms.length - 1) { current++; updateCard(); } else { startQuiz(); } }
    function prev() { if (current > 0) { current--; updateCard(); } }

    function startQuiz() {
        document.getElementById('main-board').style.display = 'none';
        document.getElementById('footer-controls').style.display = 'none';
        document.getElementById('quiz-container').style.display = 'flex';
        showQuizQuestion();
    }

    function showQuizQuestion() {
        const words = ["Democracy", "Peace", "Law"];
        const correct = terms.find(t => t.w === words[quizCount]);
        document.getElementById('quiz-question').innerText = `What is the meaning of "${correct.w}"?`;
        const options = [correct.m, "Buying new clothes.", "Swimming in the sea."].sort(() => Math.random() - 0.5);
        document.getElementById('quiz-options').innerHTML = options.map(opt => `<button class="quiz-option" onclick="checkAnswer('${opt}', '${correct.m}')">${opt}</button>`).join('');
    }

    function checkAnswer(selected, correct) {
        if (selected === correct) {
            bellSound.play();
            quizCount++;
            if (quizCount < 3) setTimeout(showQuizQuestion, 600); else showVideo();
        }
    }

    function showVideo() {
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('video-section').style.display = 'block';
    }

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '300', width: '100%', videoId: 'wkEJ0eg_6-E',
            events: { 'onStateChange': (e) => {
                if (e.data == YT.PlayerState.PAUSED || e.data == YT.PlayerState.ENDED) {
                    window.location.href = "https://wa.me/249999240574?text=Thanks!%20I%20completed%20the%20Moha%20Program!%20âœ…ğŸ›ï¸";
                }
            }}
        });
    }
</script>
</body>
</html>

