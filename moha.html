<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ© - Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø·Ù‡</title>
    <style>
        :root { --primary: #1a5f7a; --secondary: #e67e22; --success: #27ae60; --error: #c0392b; }
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 550px; width: 100%; text-align: center; border-top: 10px solid var(--primary); }
        .header { border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        .word-card { background: #fff; border: 2px dashed #ddd; border-radius: 15px; padding: 20px; margin: 15px 0; }
        .word-main { font-size: 3.8rem; color: var(--primary); font-weight: bold; margin: 0; }
        .hint-box { background: #fff3cd; color: #856404; padding: 10px; border-radius: 8px; font-size: 0.9rem; margin-top: 10px; display: none; border: 1px solid #ffeeba; }
        .btn { border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-size: 1rem; margin: 5px; font-weight: bold; color: white; transition: 0.3s; }
        .btn-listen { background: #3498db; }
        .btn-speak { background: var(--error); width: 80%; font-size: 1.2rem; }
        .status-box { margin: 15px 0; padding: 12px; border-radius: 8px; font-weight: bold; min-height: 40px; }
        .vowel-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 15px; }
        .v-btn { border: 2px solid var(--primary); background: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .v-btn:hover { background: var(--primary); color: white; }
        .wa-link { background: #25D366; color: white; text-decoration: none; display: block; padding: 15px; border-radius: 10px; margin-top: 10px; font-weight: bold; }
        #start-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(26, 95, 122, 0.98); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; border-radius: 20px; z-index: 100; }
    </style>
</head>
<body>

<div class="container" style="position: relative;">
    <div id="start-screen">
        <h1>Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ©</h1>
        <p>Ø¥Ø¯Ø§Ø±Ø©: Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§ Ø§Ù„Ù…Ù†Ø§Ù†</p>
        <button class="btn" style="background:var(--secondary); padding: 20px 40px; font-size: 1.5rem;" onclick="initQuiz()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ (Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø©) â–¶ï¸</button>
    </div>

    <div class="header">
        <h2 style="color:var(--primary); margin:0;">Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ©</h2>
        <div style="color:#666;">Ø¥Ø¯Ø§Ø±Ø©: Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§ Ø§Ù„Ù…Ù†Ø§Ù†</div>
    </div>

    <div id="quiz-body">
        <div id="progress" style="color: #888;">Ø§Ù„ÙƒÙ„Ù…Ø© 1 Ù…Ù† 10 | âš ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</div>
        
        <div class="word-card">
            <div id="target-word" class="word-main">Cat</div>
            <div id="target-trans" style="color:var(--secondary); font-size: 1.3rem;">(Ù‚Ø·Ø©)</div>
            <button class="btn btn-listen" onclick="playSound(1)">ğŸ”Š Ø§Ø³Ù…Ø¹ Ø§Ù„Ù†Ø·Ù‚</button>
            <div id="pronounce-hint" class="hint-box"></div>
        </div>

        <button class="btn btn-speak" id="mic-btn" onclick="startListening()">ğŸ¤ Ø§Ø¶ØºØ· ÙˆØ§Ù†Ø·Ù‚ Ø§Ù„Ø¢Ù†</button>
        
        <div id="status-area" class="status-box" style="display:none;"></div>

        <div id="vowel-quiz" style="display:none;">
            <p style="font-weight: bold;">Ø£Ø­Ø³Ù†Øª! Ø­Ø¯Ø¯ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨:</p>
            <div class="vowel-grid">
                <button class="v-btn" onclick="checkVowel('/Ã¦/')">/Ã¦/</button>
                <button class="v-btn" onclick="checkVowel('/É›/')">/É›/</button>
                <button class="v-btn" onclick="checkVowel('/Éª/')">/Éª/</button>
                <button class="v-btn" onclick="checkVowel('/É’/')">/É’/</button>
                <button class="v-btn" onclick="checkVowel('/ÊŒ/')">/ÊŒ/</button>
            </div>
        </div>

        <button id="next-btn" class="btn" style="background:var(--primary); display:none; margin-top:20px; width:100%;" onclick="nextQuestion()">Ø§Ù†ØªÙ‚Ù„ Ù„Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© â®•</button>
    </div>

    <div id="result-page" style="display:none;">
        <h2 style="color:var(--primary);">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h2>
        <p id="score-text" style="font-size:1.8rem; font-weight:bold;"></p>
        <a id="wa-btn" class="wa-link" target="_blank">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯ âœ…</a>
        <div style="margin-top:10px; cursor:pointer; color:var(--primary); text-decoration:underline;" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ù† Ø¬Ø¯ÙŠØ¯ ğŸ”„</div>
    </div>
</div>

<script>
    const data = [
        {w: "Cat", t: "Ù‚Ø·Ø©", v: "/Ã¦/", h: "ØªÙ„Ù…ÙŠØ­: Ø§ÙØªØ­ ÙÙ…Ùƒ Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø³Ø¹ (Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø¹Ø±ÙŠØ¶Ø©) Ø¹Ù†Ø¯ Ù†Ø·Ù‚ Ø§Ù„Ù€ A."},
        {w: "Bed", t: "Ø³Ø±ÙŠØ±", v: "/É›/", h: "ØªÙ„Ù…ÙŠØ­: Ø§Ù†Ø·Ù‚ Ø§Ù„Ù€ E Ø¨Ø´ÙƒÙ„ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹ ÙˆØ³Ø±ÙŠØ¹."},
        {w: "Sit", t: "ÙŠØ¬Ù„Ø³", v: "/Éª/", h: "ØªÙ„Ù…ÙŠØ­: Ø§Ù„Ù€ I Ù‡Ù†Ø§ ÙƒØ³Ø±Ø© Ø®ÙÙŠÙØ© Ø¬Ø¯Ø§Ù‹ ÙˆÙ‚ØµÙŠØ±Ø©."},
        {w: "Hot", t: "Ø³Ø§Ø®Ù†", v: "/É’/", h: "ØªÙ„Ù…ÙŠØ­: Ø§ÙØªØ­ ÙÙ…Ùƒ Ø¨Ø´ÙƒÙ„ Ø±Ø£Ø³ÙŠ Ø¯Ø§Ø¦Ø±ÙŠ Ù„Ù†Ø·Ù‚ Ø§Ù„Ù€ O."},
        {w: "Cup", t: "ÙƒÙˆØ¨", v: "/ÊŒ/", h: "ØªÙ„Ù…ÙŠØ­: Ø§Ù„Ù€ U ØµÙˆØª Ù‚ØµÙŠØ± ÙŠØ®Ø±Ø¬ Ù…Ù† Ø§Ù„Ø­Ù„Ù‚ ÙƒØ£Ù†Ù‡ (Ø£) Ù…ÙØ®Ù…Ø©."},
        {w: "Map", t: "Ø®Ø±ÙŠØ·Ø©", v: "/Ã¦/", h: "ØªÙ„Ù…ÙŠØ­: Ø§ÙØªØ­ Ø§Ù„ÙÙ… Ø¹Ø±Ø¶ÙŠØ§Ù‹ Ù…Ø«Ù„ ÙƒÙ„Ù…Ø© Cat."},
        {w: "Pen", t: "Ù‚Ù„Ù… Ø¬Ø§Ù", v: "/É›/", h: "ØªÙ„Ù…ÙŠØ­: ØµÙˆØª Ù‚ØµÙŠØ± ÙˆØ³Ø±ÙŠØ¹ Ù…Ø«Ù„ Ù†Ø·Ù‚ Ø­Ø±Ù (Ø¥) Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©."},
        {w: "Pig", t: "Ø®Ù†Ø²ÙŠØ±", v: "/Éª/", h: "ØªÙ„Ù…ÙŠØ­: ÙƒØ³Ø±Ø© Ø®ÙÙŠÙØ©ØŒ Ù„Ø§ ØªØ¬Ø¹Ù„Ù‡Ø§ ÙŠØ§Ø¡ Ø·ÙˆÙŠÙ„Ø©."},
        {w: "Dog", t: "ÙƒÙ„Ø¨", v: "/É’/", h: "ØªÙ„Ù…ÙŠØ­: ØµÙˆØª O Ù‚ØµÙŠØ± ÙˆÙ…ÙØªÙˆØ­."},
        {w: "Sun", t: "Ø´Ù…Ø³", v: "/ÊŒ/", h: "ØªÙ„Ù…ÙŠØ­: Ù…Ø«Ù„ Ù†Ø·Ù‚ (Ø£) ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© ÙƒÙ„Ù…Ø© (Ø£Ø¨) Ø¨Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØŒ Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹."}
    ];

    let idx = 0; let score = 0;
    const speech = window.speechSynthesis;
    const Recognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const rec = new Recognition();
    rec.lang = 'en-US';

    function initQuiz() {
        document.getElementById('start-screen').style.display = 'none';
        speech.speak(new SpeechSynthesisUtterance(""));
    }

    function playSound(speed) {
        speech.cancel();
        const u = new SpeechSynthesisUtterance(data[idx].w);
        u.lang = 'en-US'; u.rate = speed;
        speech.speak(u);
    }

    function startListening() {
        const status = document.getElementById('status-area');
        status.style.display = "block";
        status.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·...";
        status.style.background = "#eee"; status.style.color = "#333";
        rec.start();
    }

    rec.onresult = (e) => {
        const heard = e.results[0][0].transcript.toLowerCase();
        const target = data[idx].w.toLowerCase();
        const status = document.getElementById('status-area');
        const hintBox = document.getElementById('pronounce-hint');

        if (heard.includes(target)) {
            status.innerHTML = `Ù†Ø·Ù‚ ØµØ­ÙŠØ­ Ù…Ù† Ø£ÙˆÙ„ Ù…Ø±Ø©! âœ…`;
            status.style.background = "#d4edda"; status.style.color = "#155724";
            hintBox.style.display = "none";
            showVowelQuiz();
        } else {
            status.innerHTML = `Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©. Ù‚Ù„Øª "${heard}".<br>Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ùˆ: ${data[idx].w}`;
            status.style.background = "#f8d7da"; status.style.color = "#721c24";
            hintBox.innerText = data[idx].h;
            hintBox.style.display = "block";
            document.getElementById('mic-btn').style.display = "none";
            document.getElementById('next-btn').style.display = "block";
        }
    };

    function showVowelQuiz() {
        document.getElementById('mic-btn').style.display = "none";
        document.getElementById('vowel-quiz').style.display = "block";
    }

    function checkVowel(v) {
        if (v === data[idx].v) {
            score++;
            document.getElementById('status-area').innerHTML = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ÙÙŠ Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„ØµÙˆØªÙŠ âœ…";
            document.getElementById('vowel-quiz').style.display = "none";
            document.getElementById('next-btn').style.display = "block";
        } else {
            alert("Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„ØµÙˆØªØŒ Ø§Ù†ØªÙ‚Ù„ Ù„Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©.");
            document.getElementById('vowel-quiz').style.display = "none";
            document.getElementById('next-btn').style.display = "block";
        }
    }

    function nextQuestion() {
        idx++;
        if (idx < data.length) {
            document.getElementById('target-word').innerText = data[idx].w;
            document.getElementById('target-trans').innerText = `(${data[idx].t})`;
            document.getElementById('progress').innerText = `Ø§Ù„ÙƒÙ„Ù…Ø© ${idx + 1} Ù…Ù† 10 | Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·`;
            document.getElementById('status-area').style.display = "none";
            document.getElementById('next-btn').style.display = "none";
            document.getElementById('mic-btn').style.display = "inline-block";
            document.getElementById('vowel-quiz').style.display = "none";
            document.getElementById('pronounce-hint').style.display = "none";
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-body').style.display = "none";
        document.getElementById('result-page').style.display = "block";
        document.getElementById('score-text').innerText = `Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score} Ù…Ù† 10`;
        const msg = `*Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ©*%0AØ¥Ø¯Ø§Ø±Ø©: Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§ Ø§Ù„Ù…Ù†Ø§Ù†%0AØ§Ù„Ù†ØªÙŠØ¬Ø©: ${score}/10 (Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©)`;
        document.getElementById('wa-btn').href = `https://wa.me/249901946410?text=${msg}`;
    }
</script>
</body>
</html>

