<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weather Interactive for Kids</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    font-family: Arial, sans-serif;
    background: #f0f8ff;
    text-align: center;
    padding: 20px;
}
.page { display: none; }
.active { display: block; }
button {
    font-size: 18px;
    padding: 10px 20px;
    margin: 10px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
.dialog-btn { background: #2196F3; color: white; }
.correct { color: green; font-size:18px; }
.wrong { color: red; font-size:18px; }
#videoPopup {
    display: none;
    position: fixed;
    top: 10%;
    left: 10%;
    width: 80%;
    height: 60%;
    background: #fff;
    border: 2px solid #333;
    border-radius: 10px;
    z-index: 100;
    padding: 10px;
}
#videoPopup iframe {
    width: 100%;
    height: 90%;
}
#closeVideo {
    background: #FF9800;
    color: white;
    padding: 5px 10px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 5px;
}
</style>
</head>
<body>

<h2>ğŸŒ¦ Weather Interactive for Kids</h2>
<p><b>Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ©</b> - Ø¥Ø¯Ø§Ø±Ø©: Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§ Ø§Ù„Ù…Ù†Ø§Ù†</p>

<hr>

<div id="dialogue">
    <h3>ğŸ“– Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„Ù…ÙƒØªÙˆØ¨</h3>
    <p><b>Teacher:</b> Hello! How are you today? <button class="dialog-btn" onclick="showVideo()">â–¶ï¸ Watch Video</button></p>
    <p><b>Teacher:</b> What is the weather like today? <button class="dialog-btn" onclick="showVideo()">â–¶ï¸ Watch Video</button></p>
    <p><b>Teacher:</b> Do you like this weather? <button class="dialog-btn" onclick="showVideo()">â–¶ï¸ Watch Video</button></p>
</div>

<hr>

<p><b>Listen & Speak / Write:</b></p>
<button onclick="speakQuestion()">ğŸ”Š Listen Question</button>
<button onclick="startSpeaking()">ğŸ¤ Speak Answer</button>
<br>
<input type="text" id="studentInput" placeholder="Ø£ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø­Ø¨Ø¨Øª">
<br>
<button onclick="checkAnswer()">âœ… ØªØ­Ù‚Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>

<p id="feedback"></p>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
<div id="videoPopup">
    <iframe id="ytVideo" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <br>
    <button id="closeVideo" onclick="closeVideo()">âŒ Close Video</button>
</div>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙˆØ§Ø±
const dialogueData = [
    {teacher:"Hello! How are you today?", answers:["i am fine","i am good"], correct:"I am fine, thank you."},
    {teacher:"What is the weather like today?", answers:["it is hot","it is sunny","it is cold","it is rainy"], correct:"It is sunny."},
    {teacher:"Do you like this weather?", answers:["yes i like it","no i don't like it"], correct:"Yes, I like it."}
];
let currentStep = 0;

// Text-to-Speech
function speakQuestion(){
    if(currentStep < dialogueData.length){
        const utter = new SpeechSynthesisUtterance(dialogueData[currentStep].teacher);
        utter.lang = "en-US";
        speechSynthesis.speak(utter);
    }
}

// Speech Recognition
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "en-US";

function startSpeaking(){ recognition.start(); }

recognition.onresult = function(event){
    let spoken = event.results[0][0].transcript.toLowerCase();
    const feedback = document.getElementById("feedback");
    const dialogueDiv = document.getElementById("dialogue");
    const current = dialogueData[currentStep];

    dialogueDiv.innerHTML += "<p><b>Student:</b> " + spoken + "</p>";

    if(current.answers.includes(spoken)){
        feedback.innerHTML = "âœ… Correct! ğŸŒŸ Well done!";
        feedback.className = "correct";
    } else {
        feedback.innerHTML = "âŒ Incorrect. Correct answer: " + current.correct;
        feedback.className = "wrong";
        dialogueDiv.innerHTML += "<p><b>Teacher:</b> " + current.correct + "</p>";
    }

    currentStep++;
    if(currentStep < dialogueData.length){
        dialogueDiv.innerHTML += "<p><b>Teacher:</b> " + dialogueData[currentStep].teacher + ' <button class="dialog-btn" onclick="showVideo()">â–¶ï¸ Watch Video</button></p>';
    } else {
        dialogueDiv.innerHTML += "<p><b>ğŸ‰ End of dialogue! Please send Screenshot & Voice Note to the group.</b></p>";
    }
};

// ØªØ­Ù‚Ù‚ Ø§Ù„ÙƒØªØ§Ø¨Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
function checkAnswer(){
    const input = document.getElementById("studentInput").value.toLowerCase().trim();
    if(input === "") return;
    const feedback = document.getElementById("feedback");
    const dialogueDiv = document.getElementById("dialogue");
    const current = dialogueData[currentStep];

    dialogueDiv.innerHTML += "<p><b>Student:</b> " + input + "</p>";

    if(current.answers.includes(input)){
        feedback.innerHTML = "âœ… Correct! ğŸŒŸ Well done!";
        feedback.className = "correct";
    } else {
        feedback.innerHTML = "âŒ Incorrect. Correct answer: " + current.correct;
        feedback.className = "wrong";
        dialogueDiv.innerHTML += "<p><b>Teacher:</b> " + current.correct + "</p>";
    }

    currentStep++;
    document.getElementById("studentInput").value = "";

    if(currentStep < dialogueData.length){
        dialogueDiv.innerHTML += "<p><b>Teacher:</b> " + dialogueData[currentStep].teacher + ' <button class="dialog-btn" onclick="showVideo()">â–¶ï¸ Watch Video</button></p>';
    } else {
        dialogueDiv.innerHTML += "<p><b>ğŸ‰ End of dialogue! Please send Screenshot & Voice Note to the group.</b></p>";
    }
}

// Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
function showVideo(){
    const videoPopup = document.getElementById("videoPopup");
    const ytVideo = document.getElementById("ytVideo");
    // Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø·Ù‚Ø³ Ù„Ù„Ø£Ø·ÙØ§Ù„
    ytVideo.src = "https://www.youtube.com/embed/3X3vYjTj-IE?autoplay=1";
    videoPopup.style.display = "block";
}

// ØºÙ„Ù‚ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
function closeVideo(){
    const videoPopup = document.getElementById("videoPopup");
    const ytVideo = document.getElementById("ytVideo");
    ytVideo.src = "";
    videoPopup.style.display = "none";
}
</script>

</body>
</html>
